<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script src="js/vector.js"></script>
<script src="js/utility.js"></script>
<title>bezier image</title>
<script>
document.addEventListener('DOMContentLoaded', () => {
    document.querySelector('#load-button').addEventListener('click', async e => {
        // load image file
        const img = await Utility.loadImageFile();
        if(!img) { return; }
        console.log(`width: ${img.width}, height: ${img.height}`);
        // 画像がおそらく大きいので 横幅を1024pixelにする
        const width = 1024;
        const height = Math.round(img.height / img.width * width);
        // get canvas and context
        const [canvas, ctx] = Utility.getCanvasContextById('my-canvas');
        canvas.width = width;
        canvas.height = height;
        ctx.fillStyle = 'green';
        //ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
        ctx.drawImage(img, 0, 0, img.width, img.height, 0, 0, ctx.canvas.width, ctx.canvas.height);
        const imageData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);
        const info = Utility.getColorInfo(imageData);
        console.log(Utility.isAllWhite(imageData));
        console.log(info);
    });
});


</script>
</head>
<body>
    <button id="load-button">load</button><br>
    <canvas id="my-canvas" width="300" height = "150"></canvas>
</body>
</html>
